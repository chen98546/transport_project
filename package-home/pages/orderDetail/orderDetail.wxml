<view class="wrap">
    <view class="warehouse">
        <view class="noticeIcon">
            <van-icon name="location-o" color="#fff" size="40rpx" />
        </view>
        <view class="warehouseBox">
            <view class="warehouseInfo">
                <view class="warehouseInfoLeft">
                    {{orderInfo.shelfer}}
                </view>
                <view class="warehouseInfoRight" bindtap="copyDetailInfoEv" data-phoneNum="{{orderInfo.shelfPhone}}">
                    {{orderInfo.shelfPhone}}<text class="copyPhoneNumber">复制</text>
                </view>
            </view>
            <view class="warehouseAddress">{{orderInfo.shelfAddress}}</view>
        </view>
    </view>

    <view class="warehouse">
        <view class="noticeIcon noticeIcon2">
            <van-icon name="location-o" color="#fff" size="40rpx" />
        </view>
        <view class="warehouseBox">
            <view class="warehouseInfo">
                <view class="warehouseInfoLeft">
                    {{orderInfo.recipient}}
                </view>
                <view class="warehouseInfoRight">
                    {{orderInfo.recipientPhone}}
                </view>
            </view>
            <view class="warehouseAddress">{{orderInfo.recipientCity + orderInfo.recipientAddress + '(邮编：' + orderInfo.recipientCode + ')'}}</view>
        </view>
    </view>
</view>

<Unpaid orderInfo="{{orderInfo}}"></Unpaid>

<view class="wrap">
    <view>
        <van-icon class="warningIcon" name="warning-o" color="#ef0606" size="24rpx" />
        <text class="fillEnInfo">快递全部到齐点击确认打包后，订单不可修改</text>
    </view>
    <view class="courierNumBox">
        <text class="asterisk">*</text>
        <text class="courierNum">快递个数</text>
        <input class="courierInput" type="number" bindblur="gettingDataEv" type="text" placeholder="请输入（输入后弹出快递单号位置）" disabled="{{disabledInput}}" value="{{inputValue}}" style="background:{{disabledInput ? '#999' : ''}}; color:{{disabledInput ? '#f9f9f9' : ''}};" />
    </view>
    <textarea class="textarea" cols="30" rows="10" placeholder="备注信息，例如：去掉包装盒等" placeholder-class="placeholder" bindblur="textAreaEv"></textarea>

    <view class="orderNumber">

        <view class="orderItem" wx:for="{{orderItemList}}" wx:key="index">
            <text class="sort">{{index + 1}}.</text>
            <van-field placeholder="请输入快递单号" icon="{{!orderInfo.orderStatus ? 'delete-o' : ''}}" style="width: 100%;" value="{{item.expressNo}}" data-index="{{index}}" disabled="{{orderInfo.orderStatus ? true : false}}" bind:click-icon="removeOrderNoEv" bind:change="orderItemChangeEv" bind:blur="fieldBlurEv" />
            <block wx:if="{{orderInfo.orderStatus}}">
                <view slot="right-icon" class="statusTag">{{item.isDv ? '已入库' : '待入仓'}}</view>
            </block>
        </view>

        <block wx:if="{{showSupplement}}">
            <view class="supplement" wx:if="{{orderItemList.length}}" bindtap="addOrderItemEv">
                <text>+</text>
                <text>补充快递单号</text>
            </view>
        </block>
    </view>
</view>

<view class="wrap statusWrap">
    <view class="row" bindtap="copyDetailInfoEv" data-phoneNum="{{orderInfo.orderNo}}">
        订单号：<text>{{orderInfo.orderNo}}</text>
        <text class="copyPhoneNumber copyOrderNumber">复制</text>
    </view>
    <view class="row">
        转运路线：<text>{{orderInfo.provenance}} - {{orderInfo.destination}}</text>
    </view>
    <view class="row">
        预选渠道：<text>{{orderInfo.orderTypeText}}</text>
    </view>
    <view class="row">
        订单状态：<text style="color: #e18100;">{{orderInfo.orderStatusText}}</text>
    </view>
    <view class="row" wx:if="{{orderInfo.orderStatus == 4 || orderInfo.orderStatus == 5}}">
        支付状态：<text style="color: #e18100;">{{orderInfo.paymentStatus ? '已支付' : '待支付'}}</text>
    </view>
    <view class="row">
        下单时间：<text>{{orderInfo.orderDate}}</text>
    </view>
</view>

<view class="buttonGroup">
    <button class="btn" bindtap="toServiceEv">联系客服</button>
    <button class="btn" wx:if="{{orderInfo.orderStatus == 0 && !isSubmit}}" bindtap="cancleBtnEv">取消订单</button>
    <button class="btn submitBtn" wx:if="{{isSubmit}}" bindtap="submitBtnEv">提交订单</button>
    <button class="btn submitBtn" wx:if="{{orderInfo.orderStatus == 1 && dvAllStatus}}" bindtap="orderPackageEv">确认打包</button>
    <button class="btn submitBtn" wx:if="{{orderInfo.paymentStatus == 0 && orderInfo.orderStatus == 4}}" bindtap="paidOptionsEv">支付选项</button>
</view>

<!-- 增加快递单号弹窗 -->
<ConfirmModal closeModal="{{closeAddOrderNoModal}}">
    <view slot="modalTitle" class="ConfirmModalTitle">是否增加快递单号？</view>
    <view slot="userAddress" class="addOrder">
        增加快递单号后，发往转运中心的快递个数+1。是否要继续？
    </view>
    <view slot="modalRefuse" bind:tap="addOrderNoRefuseEv">取消</view>
    <view slot="modalAllow" bind:tap="addOrderNoAllowEv">确认</view>
</ConfirmModal>

<!-- 删除快递单号弹窗 -->
<ConfirmModal closeModal="{{closeRemoveOrderNoModal}}">
    <view slot="modalTitle" class="ConfirmModalTitle">是否删除快递单号？</view>
    <view slot="userAddress" class="addOrder">
        删除快递单号后，发往转运中心的快递个数-1。是否要继续？
    </view>
    <view slot="modalRefuse" bind:tap="removeOrderNoRefuseEv">取消</view>
    <view slot="modalAllow" bind:tap="removeOrderNoAllowEv">确认</view>
</ConfirmModal>

<!-- 取消订单弹窗 -->
<ConfirmModal closeModal="{{closeCancleOrderModal}}">
    <view slot="modalTitle" class="ConfirmModalTitle">是否取消订单</view>
    <view slot="userAddress" class="addOrder cancleOrder">
        取消订单后，订单将不能进行后续操作 是否继续？
    </view>
    <view slot="modalRefuse" bind:tap="cancleOrderNoRefuseEv">取消</view>
    <view slot="modalAllow" bind:tap="cancleOrderNoAllowEv">确认</view>
</ConfirmModal>

<!-- 确认订单弹窗 -->
<ConfirmModal closeModal="{{closeConfirmOrderModal}}">
    <view slot="modalTitle" class="ConfirmModalTitle">请确认快递单号是否无误</view>
    <view slot="userAddress" class="addOrder cancleOrder">
        请确认快递单号【{{orderNoArr}}】是否无误，一旦提交，不可修改
    </view>
    <view slot="modalRefuse" bind:tap="confirmOrderNoRefuseEv">取消</view>
    <view slot="modalAllow" bind:tap="confirmOrderNoAllowEv">确认</view>
</ConfirmModal>

<!-- 确认打包弹窗 -->
<ConfirmModal closeModal="{{closeConfirmPackingModal}}">
    <view slot="modalTitle" class="ConfirmModalTitle">是否确认打包所有的快递包裹</view>
    <view slot="userAddress" class="addOrder cancleOrder">
        确认后，订单进入捡货状态，快递包裹将会进行打包称重，是否要继续？
    </view>
    <view slot="modalRefuse" bind:tap="confirmPackingNoRefuseEv">取消</view>
    <view slot="modalAllow" bind:tap="confirmPackingNoAllowEv">确认</view>
</ConfirmModal>

<!-- 支付选项确认地址弹窗 -->
<ConfirmModal closeModal="{{closeConfirmAddressModal}}">
    <view slot="modalTitle" class="ConfirmModalTitle">请确认您的收货地址</view>
    <view slot="userAddress" class="addOrder confirmAddress">
        <view class="noticeIcon">
            <van-icon name="location-o" color="#fff" size="40rpx" />
        </view>
        <view class="warehouseBox">
            <view class="warehouseInfo confirmWarehouseInfo">
                <view class="warehouseInfoLeft">
                    {{orderInfo.recipient}}
                </view>
                <view class="warehouseInfoRight">
                    {{orderInfo.recipientPhone}}
                </view>
            </view>
            <view class="warehouseAddress confirmAddr">{{orderInfo.recipientCity + orderInfo.recipientAddress + '(邮编：' + orderInfo.recipientCode + ')'}}</view>
        </view>
    </view>
    <view slot="modalRefuse" bind:tap="confirmAddressRefuseEv">取消</view>
    <view slot="modalAllow" bind:tap="confirmAddressAllowEv">确认</view>
</ConfirmModal>